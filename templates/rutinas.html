{% extends "base.html" %}
{% block content %}
<div class="container py-5">
  <h2 class="text-center mb-3 fw-bold text-primary">üí™ Rutinas de Entrenamiento</h2>
  <p class="text-center text-muted mb-5">Explora diferentes tipos de rutinas dise√±adas para tus necesidades y espacios.</p>

  <!-- SECCI√ìN DE CATEGOR√çAS -->
  <div class="row g-4" id="contenedor-tarjetas">

    <!-- üè† Rutinas en Casa -->
    <div class="col-md-4">
      <div class="card categoria-card shadow-sm h-100 border-0">
        <div class="card-body d-flex flex-column">
          <h5 class="fw-semibold mb-2">üè† Rutinas en Casa</h5>
          <p class="text-muted flex-grow-1">
            Entrena desde la comodidad de tu hogar con ejercicios pr√°cticos, adaptables y sin necesidad de equipos.
          </p>
          <button class="btn btn-outline-primary w-100 mt-2 fw-semibold" onclick="toggleSection('casa')">Ver Rutinas</button>

          <!-- Contenido desplegable -->
          <div id="casa" class="rutina-section mt-3 collapse">
            <ul class="list-group list-group-flush">
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Rutina Full Body (sin pesas)', this)">Rutina Full Body (sin pesas)</li>
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Cardio 20 min en casa', this)">Cardio 20 min en casa</li>
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Yoga y estiramientos matutinos', this)">Yoga y estiramientos matutinos</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- üíº Rutinas Laborales -->
    <div class="col-md-4">
      <div class="card categoria-card shadow-sm h-100 border-0">
        <div class="card-body d-flex flex-column">
          <h5 class="fw-semibold mb-2">üíº Rutinas Laborales</h5>
          <p class="text-muted flex-grow-1">
            Mant√©n tu cuerpo activo durante el trabajo. Rutinas breves que puedes realizar en tu oficina o espacio laboral.
          </p>
          <button class="btn btn-outline-primary w-100 mt-2 fw-semibold" onclick="toggleSection('laboral')">Ver Rutinas</button>

          <!-- Contenido desplegable -->
          <div id="laboral" class="rutina-section mt-3 collapse">
            <ul class="list-group list-group-flush">
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Ejercicios de estiramiento en oficina', this)">Ejercicios de estiramiento en oficina</li>
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Pausas activas de 10 minutos', this)">Pausas activas de 10 minutos</li>
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Movilidad cervical y lumbar', this)">Movilidad cervical y lumbar</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- üå≥ Rutinas al Aire Libre -->
    <div class="col-md-4">
      <div class="card categoria-card shadow-sm h-100 border-0">
        <div class="card-body d-flex flex-column">
          <h5 class="fw-semibold mb-2">üå≥ Rutinas al Aire Libre</h5>
          <p class="text-muted flex-grow-1">
            Disfruta de la naturaleza mientras fortaleces tu cuerpo. Ejercicios din√°micos ideales para parques o espacios abiertos.
          </p>
          <button class="btn btn-outline-primary w-100 mt-2 fw-semibold" onclick="toggleSection('airelibre')">Ver Rutinas</button>

          <!-- Contenido desplegable -->
          <div id="airelibre" class="rutina-section mt-3 collapse">
            <ul class="list-group list-group-flush">
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Caminata + trote ligero', this)">Caminata + trote ligero</li>
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Circuito de ejercicios en parque', this)">Circuito de ejercicios en parque</li>
              <li class="list-group-item rutina-item" onclick="mostrarRutinaDetallada('Entrenamiento con peso corporal', this)">Entrenamiento con peso corporal</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- BOT√ìN VOLVER -->
  <div class="text-end mt-4">
    <button id="btn-volver" class="btn btn-outline-secondary d-none" onclick="restaurarVista()">‚Üê Ver todas las rutinas</button>
  </div>

  <!-- SECCI√ìN DETALLE -->
  <div id="detalle-rutina" class="mt-5 p-4 rounded bg-white shadow-sm border d-none">
    <h3 id="titulo-rutina" class="text-center text-primary mb-3 fw-bold"></h3>
    <p id="descripcion-rutina" class="text-center text-muted"></p>
    <div id="meta-rutina" class="text-center small mb-3 text-secondary"></div>
    <hr>
    <div id="acordeon-pasos" class="accordion"></div>
  </div>
</div>

<!-- üé® Estilos visuales -->
<style>
  .categoria-card {
    border-radius: 14px;
    transition: all 0.25s ease;
    background-color: #f9fafc;
  }
  .categoria-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.08);
    background-color: #fff;
  }
  .rutina-item {
    cursor: pointer;
    transition: all 0.15s ease;
  }
  .rutina-item:hover {
    background-color: #0d6efd;
    color: #fff;
  }
  .rutina-item.activa {
    background-color: #0d6efd !important;
    color: white;
    font-weight: 600;
  }
  .categoria-card.inactiva {
    opacity: 0.35;
    pointer-events: none;
    transition: opacity .25s ease;
  }
  #detalle-rutina {
    animation: fadeIn 0.3s ease;
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }
  .card-body h5 {
    color: #0d6efd;
  }
  .accordion-button {
    background-color: #f8f9fa;
    font-weight: 600;
  }
  .accordion-button:not(.collapsed) {
    color: #0d6efd;
    background-color: #e9f2ff;
  }
  .accordion-body {
    background-color: #fff;
    font-size: 0.95rem;
    line-height: 1.6;
  }
</style>

<!-- üß† Script de interacci√≥n -->
<script>
  function toggleSection(id) {
    const secciones = document.querySelectorAll('.rutina-section');
    secciones.forEach(sec => {
      if (sec.id !== id) sec.classList.remove('show');
    });
    document.getElementById(id).classList.toggle('show');
  }

  function mostrarRutinaDetallada(nombre, elemento) {
    document.querySelectorAll('.rutina-item').forEach(item => item.classList.remove('activa'));
    elemento.classList.add('activa');

    const tarjetas = document.querySelectorAll('.categoria-card');
    tarjetas.forEach(card => {
      if (!card.contains(elemento)) card.classList.add('inactiva');
    });

    document.getElementById('detalle-rutina').classList.remove('d-none');
    document.getElementById('btn-volver').classList.remove('d-none');
    document.getElementById('titulo-rutina').innerText = nombre;
    document.getElementById('descripcion-rutina').innerText = "Descripci√≥n detallada de " + nombre + ". Aqu√≠ puedes incluir pasos, recomendaciones y consejos pr√°cticos.";
    document.getElementById('acordeon-pasos').innerHTML = `
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button" data-bs-toggle="collapse" data-bs-target="#paso1">Paso 1</button>
        </h2>
        <div id="paso1" class="accordion-collapse collapse show">
          <div class="accordion-body">Explicaci√≥n detallada del paso 1 para ${nombre}. Incluye duraci√≥n, repeticiones y t√©cnica correcta.</div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#paso2">Paso 2</button>
        </h2>
        <div id="paso2" class="accordion-collapse collapse">
          <div class="accordion-body">Detalles del paso 2: consejos para mantener la postura, respiraci√≥n y ritmo adecuado.</div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#paso3">Paso 3</button>
        </h2>
        <div id="paso3" class="accordion-collapse collapse">
          <div class="accordion-body">Resumen final, estiramientos de cierre y consejos de recuperaci√≥n para ${nombre}.</div>
        </div>
      </div>
    `;
  }

  function restaurarVista() {
    document.querySelectorAll('.categoria-card').forEach(card => card.classList.remove('inactiva'));
    document.querySelectorAll('.rutina-item').forEach(item => item.classList.remove('activa'));
    document.getElementById('detalle-rutina').classList.add('d-none');
    document.getElementById('btn-volver').classList.add('d-none');
  }
</script>
{% endblock %}
