{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h2 class="text-center mb-4 fw-bold text-primary">üí™ Rutinas de Entrenamiento</h2>
  <p class="text-center text-muted">Selecciona un entorno y descubre rutinas dise√±adas especialmente para ti.</p>

  <!-- TARJETAS DE CATEGOR√çAS -->
  <div class="row mt-4 g-4">
    {% set categorias = [
      {'id':'casa','icon':'üè†','titulo':'Rutinas en Casa','desc':'Entrena desde la comodidad de tu hogar con poco o ning√∫n equipo.'},
      {'id':'laboral','icon':'üíº','titulo':'Rutinas Laborales','desc':'Ejercicios cortos para realizar durante tu jornada laboral.'},
      {'id':'airelibre','icon':'üå≥','titulo':'Rutinas al Aire Libre','desc':'Aprovecha el espacio exterior para entrenar y conectar con la naturaleza.'},
      {'id':'rehabilitacion','icon':'‚ù§Ô∏è','titulo':'Rutinas de Rehabilitaci√≥n','desc':'Ejercicios suaves enfocados en movilidad y recuperaci√≥n.'},
      {'id':'hiit','icon':'‚ö°','titulo':'Rutinas HIIT (Alta Intensidad)','desc':'Entrenamientos intensos y cortos para quemar grasa r√°pidamente.'},
      {'id':'mindfulness','icon':'‚òØÔ∏è','titulo':'Mindfulness y Relajaci√≥n','desc':'Ejercicios para la calma mental, control del estr√©s y bienestar general.'}
    ] %}
    {% for cat in categorias %}
    <div class="col-md-4">
      <div class="card p-4 h-100 shadow-sm border-0 categoria-card">
        <h5>{{cat.icon}} {{cat.titulo}}</h5>
        <p class="text-muted small">{{cat.desc}}</p>
        <button class="btn btn-gradient w-100" type="button" onclick="toggleSection('{{cat.id}}')">Ver Rutinas</button>
        <div id="{{cat.id}}" class="rutina-section mt-3 collapse">
          <ul class="list-group rutina-list"></ul>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- SECCI√ìN DETALLADA -->
  <div id="detalle-rutina" class="mt-5 p-4 rounded shadow-sm bg-light d-none animate__animated animate__fadeIn">
    <button class="btn btn-outline-secondary mb-3" onclick="volverALista()">‚Üê Ver todas las rutinas</button>
    <h3 id="titulo-rutina" class="text-center mb-3 fw-bold text-primary"></h3>
    <p id="descripcion-rutina" class="text-center text-muted"></p>
    <hr>
    <ol id="pasos-rutina" class="list-group list-group-numbered"></ol>
  </div>
</div>

<!-- ESTILO MEJORADO -->
<style>
  .btn-gradient {
    background: linear-gradient(90deg, #007bff, #00c6ff);
    border: none;
    color: white;
    transition: 0.3s;
    font-weight: 500;
  }
  .btn-gradient:hover {
    transform: scale(1.03);
    background: linear-gradient(90deg, #0056b3, #0096c7);
  }
  .categoria-card {
    transition: transform 0.3s, box-shadow 0.3s;
    border-radius: 15px;
  }
  .categoria-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.1);
  }
  .rutina-list li {
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .rutina-list li:hover {
    background-color: #f0f8ff;
    transform: scale(1.02);
  }
</style>

<script>
const RUTINAS = {
  "casa": [
    "Rutina Full Body (sin pesas)",
    "Cardio 20 min en casa",
    "Yoga y estiramientos matutinos"
  ],
  "laboral": [
    "Ejercicios de estiramiento en oficina",
    "Pausas activas de 10 minutos",
    "Movilidad cervical y lumbar"
  ],
  "airelibre": [
    "Caminata + trote ligero",
    "Circuito de ejercicios en parque",
    "Entrenamiento con peso corporal"
  ],
  "rehabilitacion": [
    "Movilidad articular suave",
    "Ejercicios post-lesi√≥n",
    "Fortalecimiento progresivo"
  ],
  "hiit": [
    "HIIT 15 minutos (sin equipo)",
    "Cardio explosivo 10 minutos",
    "Tabata express"
  ],
  "mindfulness": [
    "Relajaci√≥n guiada",
    "Respiraci√≥n consciente",
    "Meditaci√≥n en movimiento"
  ]
};

function toggleSection(id) {
  document.querySelectorAll('.rutina-section').forEach(sec => {
    if (sec.id !== id) sec.classList.remove('show');
  });

  const section = document.getElementById(id);
  const list = section.querySelector('.rutina-list');
  list.innerHTML = RUTINAS[id].map(r => `
    <li class="list-group-item" onclick="mostrarRutinaDetallada('${r}')">${r}</li>
  `).join("");
  section.classList.toggle('show');
}

function mostrarRutinaDetallada(nombre) {
  const detalle = document.getElementById('detalle-rutina');
  const titulo = document.getElementById('titulo-rutina');
  const descripcion = document.getElementById('descripcion-rutina');
  const pasos = document.getElementById('pasos-rutina');

  // Aqu√≠ puedes mantener la estructura original de tus descripciones
  titulo.textContent = nombre;
  descripcion.innerHTML = "<p>Descripci√≥n detallada y pasos personalizados para esta rutina.</p>";
  pasos.innerHTML = `
    <li class="list-group-item">Paso 1: Calentamiento general (3-5 minutos)</li>
    <li class="list-group-item">Paso 2: Ejercicio principal adaptado a la rutina</li>
    <li class="list-group-item">Paso 3: Estiramientos y respiraci√≥n consciente</li>
  `;
  
  detalle.classList.remove("d-none");
  detalle.scrollIntoView({ behavior: "smooth" });
}

function volverALista() {
  document.getElementById('detalle-rutina').classList.add('d-none');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
{% endblock %}
